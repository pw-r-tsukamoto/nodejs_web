# nodejs_web

- https://zenn.dev/wkb/books/node-tutorial


- なぜわからないか？
  - わかりたいのは、「フロントエンドのコードを楽に書く、新しい仕組み」
    - Node.jsのなかで、わかりたい「フロントエンドのコード」がどこまでなのかわからない
      - ここでいうフロントエンドのコード -> イベントリスナーを使った動作ができること（もしかしたらこれもSSR？）
    
- 目的
  - これまでフロントエンドのjQueryでやっていたことと同じことをNodejsでやる手法を確立する（Reactを書くことが目的じゃない）
  - バックエンドで動作する（サーバサイドレンダリング）がなされるのはどこか？そうでないのはどこか？を見極める

- 余：Typescript/ECMAScriptの新しい記法についても学習したい。
   - https://webmanab-html.com/tip/javascript-es6/
   - Q. Rubyなど、既存の別言語で作成したアプリに上記の仕組みを載せることはできるのか？
   

   
### 触ってみた結論（まとめ）

- Node.jsは…
  - サーバサイドでJsを動作させるもの。
  - サーバーとフロントを同じ言語で書いているというだけで、ファイル拡張子が同じでも実際は分離されている。
  - 以降、サーバサイドで動くJsを「サーバサイドjs」、クライアントサイドで動くJsを「クライアントサイドJs」と呼ぶ。
  
  - 用語
    - yarn
      - Javascript「モジュール」の管理ツール。
      - package.jsonに以下をまとめておく
        - インストールするパッケージのリスト
        - 実行コマンド（サーバ立ち上げコマンドやビルドコマンドをここに書いておくと省略形で書ける）
    - webpack
      - Javascript「ファイル」の管理ツール。
      
    - コマンド実行(yarn run ~~~) -> webpack実行 -> Jsファイル自体の処理を実行
    
    - https://goworkship.com/magazine/how-to-webpack/


  - サーバサイドjs
    - minipageでいうところの`main.js`
    - サーバサイドで動かすもののため、クリックイベントやホバーイベントは使えない模様。（サーバーサイドレンダリングがコレ）
    - サーバサイドで動く性質上、ブラウザの機能に依存しないが、読み込みが遅くなることがある
    - ブラウザから中身を見ることはできない。
    - 文法はクライアントサイドJsと同じ
    - モジュールを読みこみ、その関数を使うという点ではRails等と同じ
    - 今回のように、特別に読み込みを許可するなどの手法を取らない
    - console.logはターミナル上に表示される

  - クライアントサイドJs
    - minipageでいうところの`script.js`
    - ブラウザから中身を見ることができる。通常のJsにほぼ準ずる。
    - ブラウザの機能に依存するが、読み込みが速い。また、ブラウザ依存の機能を使うことができる
    - クリックイベント等のブラウザが絡む操作は結局こっちでやらないといけない（APIリクエストなんかはサーバサイドjsでもできる）
    - console.logはブラウザコンソール上に表示される

  - React
    - フロントJsとバックJsをまとめて書けるフレームワーク。構造上、Railsなどとの併用はほぼ無理。
    
  - 総括
    - クライアントサイドのJsをES6等のモダンな記法で書きたい場合...
      - あらかじめES6以降で書いたJsをモジュール「babel」で素のJsに変換＆圧縮するだけ。
        - jQueryのように実行のたびにライブラリを読ませる必要はなく、変換系はコード完成直後の時点で終わらせておく
        
    - 他言語と併用する場合、サーバーサイドを多言語、クライアントサイドにクライアントJsを載せる構成になりそう。


- Q.フロント「のみ」のNode用モジュール（jQueryみたいに記法を簡易に書ける手段）は存在する？  
- Q.`node main.js`でサーバーを立ち上げられるが、これをWebpack等と一緒にまとめて、立ち上げつつES5への変換を１コマンドで行うことはできるか？
- Q. axiosなど、Node.jsのモジュールをクライアントJsで利用することはできる？


### ほか、やってみたいこと

- ホスティングサービスへのデプロイ（Githubを使ってpushするやつ）
- Denoで同様の内容
- Webpackで複数のファイルを操作する
- サーバの立ち上げとWebpackでの変換を一緒に
- axiosなど、Node.jsのモジュールをクライアントJsで利用してみる
- フロントから、モジュールでDBに接続を試してみる（アンチパターンだろうけど）
- フロントのみの処理を行うアプリ（Babelつき）をつくる
- FW
- がんばればChrome拡張だったり今までに作ったJsだったりを集約できそう？
